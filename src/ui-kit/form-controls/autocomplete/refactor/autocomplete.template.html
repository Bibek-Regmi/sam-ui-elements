<div class="sam-autocomplete">
  <sam-label-wrapper
    #wrapper
    sam-click-outside
    (clickOutside)="onBlurEvent.next($event)"
    sam-tab-outside
    (tabOutside)="onBlurEvent.next($event)"
    [label]="label || labelText"
    [hint]="hint"
    [name]="id"
    [required]="required"
    [errorMessage]="errorMessage">
    <div class="input-container">
      <input type="text"
            #input
            (input)="onInputEvent.next($event)"
            (focus)="onInputFocus.next($event)"
            (keydown)="onInputKeydown.next($event)"
            (keyup)="onInputKeyup.next($event)"
            (change)="onInputChange.next($event)"
            [ngModel]="inputValue"
            [attr.id]="id"
            autocomplete="off"
            [attr.placeholder]="placeholder"
            [attr.name]="name"
            [attr.aria-label]="name"
            [required]="required"
            [disabled]="disabled">
      <span class="icon-container">
        <button *ngIf="displayClearButton()"
                class="usa-button-link"
                (click)="clearComponent()">
          <span class="fa fa-times-circle" aria-hidden="true"></span>
          <span class="sr-only">Clear input.</span>
        </button>
        <span *ngIf="displaySpinner" class="fa fa-spinner fa-pulse"></span>
        <span *ngIf="!displaySpinner" class="fa" [ngClass]="addOnIconClass"></span>
      </span>
    </div>
    <ul class="usa-unstyled-list results-list"
      *ngIf="displayList | async"
      #list>
      <li [class.multiple-values]="config?.keyValueConfig?.subheadProperty"
          *ngFor="let option of filteredOptions | async; let i = index"
          class="one class two classess three classessess"
          [ngClass]="{ 'category': option?.isCategory }"
          (click)="updateComponentValue(option)"
          (mouseenter)="listItemHover(i)">
        {{ displayOptionText(option) }}
        <ng-container *ngIf="option && option[config?.keyValueConfig?.subheadProperty]">
          <br/>
          <span class="secondary-value">
            {{ option[config?.keyValueConfig?.subheadProperty] }}
          </span>
        </ng-container>
      </li>
    </ul>
    <!-- Screen reader -->
    <ul #screenReaderEl class="usa-sr-only" aria-live="assertive" aria-relevant="additions"></ul>
  </sam-label-wrapper>
</div>
